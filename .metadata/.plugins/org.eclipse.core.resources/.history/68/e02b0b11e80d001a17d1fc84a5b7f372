package ejercicio3_6;

import java.io.IOException;
import java.net.DatagramPacket;
import java.net.DatagramSocket;
import java.net.InetAddress;
import java.net.SocketException;
import java.net.UnknownHostException;

import utiles.trycatch;

public class Servidor {

	public static void main(String[] args) throws IOException {
	trycatch t = new trycatch();
	
		DatagramSocket socket = new DatagramSocket(6000);
		
		//Esperando datagrama
		
		System.out.println("Esperando datagrama cliente....");
		
		DatagramPacket recibo;
		byte[] buffer = new byte[1024];
		recibo= new DatagramPacket(buffer, buffer.length);
		socket.receive(recibo);
		
		String mensaje= new String(recibo.getData()).trim();
		System.out.println("Servidor recibe: "+mensaje);
			
			//INTRODUCE DATO POR TECLASE
			System.out.println("Introduce el mensaje: ");
			String cadena= "mensaje de prueba del cliente";
			
			byte[] enviados = new byte[1024];
			enviados = cadena.getBytes();
			
			//ENVIANDO DATAGRAMA AL SERVIDOR
			DatagramPacket envio = new DatagramPacket(enviados,enviados.length, IPServidor, puerto);
			
			cliente.send(envio);
			
			//RECIBIENDO DATAGRAMA SERVIDOR
			
			byte[] recibidos = new byte[2];
			DatagramPacket recibo = new DatagramPacket(recibidos, recibidos.length);
			
			System.out.println("Esperando datagrama...");
			cliente.receive(recibo);
			
			System.out.println("mensaje recibido del servidor: "+recibo.getData());
			
			
			
					
			
	}

}
